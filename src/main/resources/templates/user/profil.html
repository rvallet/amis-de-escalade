<!DOCTYPE html>
<html lang="fr"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="~{base}">

	<head th:insert="base :: head"></head>
	<head>
		<title>Mon profil utilisateur - LADE</title>
		<meta name="description" content="Profil Utilisateur - Les amis de l'escalade"/>
	</head>
	<body>
		<th:block th:insert="base :: header">...</th:block>
		<main layout:fragment="main" role="main" th:remove="tag">
			<section id="UserProfile">
				<div class="container">				
					
<!-- 					Mon Profil -->
					<div class="col-md-12" th:value="${user}">
						<h2>Profil Utilisateur</h2>
						<span th:text="${user?.pseudo}">Pseudo</span>
						<span th:text="${user?.lastName}">Nom</span>
						<span th:text="${user?.firstName}">Prénom</span>
						<span th:text="${user?.email}">e-Mail</span>				
					</div>
					
<!-- 					Mes Sites -->
					<div class="col-md-12" th:if="${userAreaList!=null and !userAreaList.isEmpty()}">
						<hr />
						<h3>Mes sites</h3>
						<div class="table-responsive">
							<table class="table table-hover">
								<thead class="thead-dark">
									<tr>
										<th scope="col">#</th>
										<th scope="col">Nom</th>
										<th scope="col">Description</th>
										<th scope="col">Date</th>								
									</tr>
								</thead>
								<tbody>
									<tr th:each="area:${userAreaList}">
										<th scope="row"><span th:text="${area?.id}">#</span></th>
										<td><span th:text="${area?.name}">Nom</span></td>
										<td><span th:text="${area?.description}">Description</span></td>
										<td><span th:text="${#dates.format(area.releaseDate, 'dd/MM/yyyy')}">Date</span></td>								
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					
<!-- 					Mes Topos -->
					<div class="col-md-12" th:if="${userTopoList!=null and !userTopoList.isEmpty()}">
						<hr />
						<h3>Mes Topos</h3>
						<div class="table-responsive">
							<table class="table table-hover">
								<thead class="thead-dark">
									<tr>
										<th scope="col">#</th>
										<th scope="col">Nom</th>
										<th scope="col">Description</th>
										<th scope="col">Lieu</th>
										<th scope="col">Date</th>
										<th scope="col">Disponible</th>								
									</tr>
								</thead>
								<tbody>
									<tr th:each="topo:${userTopoList}">
										<th scope="row"><span th:text="${topo.id}">#</span></th>
										<td><span th:text="${topo.name}">Nom</span></td>
										<td><span th:text="${topo.description}">Description</span></td>
										<td><span th:text="${topo.location}">Lieu</span></td>
										<td><span th:text="${#dates.format(topo.releaseDate, 'dd/MM/yyyy')}">Date</span></td>
										<td>
											<div class="text-center">
												<input class="form-check-input form-check-inline" type="checkbox" th:checked="${topo?.isAvailableForLoan}" disabled>
												<span th:text="${topo?.isAvailableForLoan} ? 'Oui' : 'Non'">Dispo</span>
												<form th:action="@{/user/edit-topo}" method="get">
													<input type="hidden" name="id" th:value="${topo?.id}">
													<button type="submit">Edit</button>
												</form>
											</div>										
										</td>							
									</tr>
								</tbody>
							</table>
						</div>
					</div>

<!-- 					Mes demandes de Topos -->
					<div class="col-md-12" th:if="${userTopoLoanList!=null and !userTopoLoanList.isEmpty()}">
						<hr />
						<h3>Mes demandes</h3>
						<div class="table-responsive">
							<table class="table table-hover">
								<thead class="thead-dark">
									<tr>
										<th scope="col">#</th>
										<th scope="col">Nom</th>
										<th scope="col">Description</th>
										<th scope="col">Propriétaire</th>
										<th scope="col">Date de la demande</th>
										<th scope="col">Statut</th>
																			
									</tr>
								</thead>
								<tbody>
									<tr th:each="topoLoan:${userTopoLoanList}">
										<th scope="row"><span th:text="${topoLoan.id}">#</span></th>
										<td><span th:text="${topoLoan.topo?.name}">Nom</span></td>
										<td><span th:text="${topoLoan.topo?.description}">Description</span></td>
										<td><span th:text="${topoLoan.lender}">Description</span></td>
										<td><span th:text="${#dates.format(topoLoan.creationDate, 'dd/MM/yyyy')}">Date</span></td>
										<td><span th:text="${topoLoan.status}">Description</span></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>				
					
<!-- 					Mes commentaires -->
					<div class="col-md-12" th:if="${userTopoList!=null and !userTopoList.isEmpty()}">
						<hr />
						<h3>Mes commentaires</h3>
						<div class="table-responsive">
							<table class="table table-hover">
								<thead class="thead-dark">
									<tr>
										<th scope="col">#</th>
										<th scope="col">Titre</th>
										<th scope="col">Contenu</th>
										<th scope="col">Date</th>								
									</tr>
								</thead>
								<tbody>
									<tr th:each="comment:${userCommentList}">
										<th scope="row"><span th:text="${comment.id}">#</span></th>
										<td><span th:text="${comment.title}">Titre</span></td>
										<td><span th:text="${comment.content}">Contenu</span></td>
										<td><span th:text="${#dates.format(comment.releaseDate, 'dd/MM/yyyy')}">Date</span></td>								
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				
				
				</div>
			</section>
		</main>
		<th:block th:insert="base :: footer">...</th:block>
		<th:block th:insert="base :: script">...</th:block>
	</body>
</html>					